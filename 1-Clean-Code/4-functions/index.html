<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>1.4- Fun√ß√µes e m√©todos - Code Patterns</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "1.4- Fun\u00e7\u00f5es e m\u00e9todos";
        var mkdocs_page_input_path = "1-Clean-Code\\4-functions.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Code Patterns
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Padr√µes de C√≥digo<br></a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">1 Clean Code</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../1-nomenclature/">1.1- Nomenclatura</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../2-code-format/">1.2- Formata√ß√£o do c√≥digo</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../3-flow-control/">1.3- Controle do fluxo</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">1.4- Fun√ß√µes e m√©todos</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#141-usar-o-dry-dont-repeat-yourselt">1.4.1- Usar o DRY (Don't Repeat Yourselt)  </a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#142-as-funcoes-devem-fazer-apenas-uma-coisa-single-responsability-principle">1.4.2- As fun√ß√µes devem fazer apenas uma coisa (Single Responsability Principle)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#143-limitar-o-numero-de-argumentos-das-funcoes">1.4.3- Limitar o n√∫mero de argumentos das fun√ß√µes</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#144-usar-parametros-default">1.4.4- Usar par√¢metros default</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#145-evitar-efeitos-colaterais-das-funcoes">1.4.5- Evitar efeitos colaterais das fun√ß√µes</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../5-vscode-config/">1.5- Configura√ß√£o VSCode</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">2 Design Patterns</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../2-Design-Patterns/design-patterns/">Padr√µes de Design</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Code Patterns</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>1 Clean Code &raquo;</li>
      <li>1.4- Fun√ß√µes e m√©todos</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="14-funcoes-e-metodos">1.4- Fun√ß√µes e m√©todos</h1>
<p><br></p>
<hr />
<h3 id="141-usar-o-dry-dont-repeat-yourselt">1.4.1- Usar o DRY (<strong>D</strong>on't <strong>R</strong>epeat <strong>Y</strong>ourselt)  <br></h3>
<p>C√≥digo que tem o potencial de ser usado em outros lugares do sistema, ou seja, √© gen√©rico, deve ser escrito (encapsulado) dentro de uma fun√ß√£o (que poder√°, por sua vez, chamar outras fun√ß√µes).<br></p>
<p>Em outras palavras, n√£o escreva o mesmo c√≥digo ou c√≥digo muito parecido em mais de um lugar, no sistema. Se ocorrer a necessidade de fazer isso, encapsule tal c√≥digo em uma fun√ß√£o reus√°vel.<br></p>
<p>Isto facilita o entendimento desse c√≥digo por outros desenvolvedores, incluindo voc√™, no futuro, e facilita a manuten√ß√£o e expans√£o futuras desse c√≥digo.<br>
<br></p>
<hr />
<h3 id="142-as-funcoes-devem-fazer-apenas-uma-coisa-single-responsability-principle">1.4.2- As fun√ß√µes devem fazer apenas uma coisa (Single Responsability Principle)<br></h3>
<p>Note que 'fazer apenas uma coisa', aqui, tem um significado especial. Certamente, a maioria das fun√ß√µes que criamos faz mais de uma coisa, e tais fun√ß√µes n√£o teriam raz√£o de existir n√£o fosse esse fato.<br></p>
<p>Para entendermos o que 'fazer apenas uma coisa' significa, aqui, precisamos explicar um conceito chamado de <em>n√≠vel de abstra√ß√£o</em>.<br></p>
<p>Vamos explicar este conceito com uma ilustra√ß√£o concreta.<br>
Imagine que voc√™ queira realizar uma tarefa de processar um pagamento, que consista na execu√ß√£o de 100 passos, em sequ√™ncia.<br>
Como organizaria essa tarefa em JavaScript?<br>
Definiria uma √∫nica fun√ß√£o, por exemplo <strong>processPayment()</strong>, e executaria os 100 passos dentro dessa fun√ß√£o?<br>
Certamente, essa solu√ß√£o n√£o deixaria o c√≥digo claro, f√°cil de entender e de manter.<br>
<br>
Uma solu√ß√£o melhor seria:<br></p>
<ol>
<li>Organizar os 100 passos em 20 grupos de aproximadamente 5 passos, cada.</li>
<li>Criar 20 fun√ß√µes adicionais, cada uma para executar os passos dentro de cada um desses 20 grupos. Dizemos, ent√£o, que os passos est√£o no n√≠vel 1 de abstra√ß√£o e que as 20 fun√ß√µes que executam cada grupo de passos est√£o em um n√≠vel de abstra√ß√£o superior, que chamamos de n√≠vel 2.<br> </li>
<li>Oganizar as 20 fun√ß√µes em 4 novos grupos, com 5 fun√ß√µes do n√≠vel 2, em cada um desses 4 grupos.</li>
<li>Criar 4 fun√ß√µes para executar as fun√ß√µes de cada um desses 4 grupos. Agora, podemos dizer que essas 4 novas fun√ß√µes est√£o no n√≠vel 3 de abstra√ß√£o. E, por fim, dizemos que o n√≠vel de abstra√ß√£o da fun√ß√£o principal, <strong>processPayment()</strong>, √© o n√≠vel 4 de abstra√ß√£o.<br>
<br></li>
</ol>
<p>Esta ilustra√ß√£o nos permite, ent√£o, explicar que: 'fazer apenas uma coisa' significa fazer apenas uma coisa no n√≠vel de abstra√ß√£o descrito pelo nome da fun√ß√£o. E, portanto, o t√≠tulo desta se√ß√£o significa que <strong>uma fun√ß√£o deve fazer apenas uma coisa no n√≠vel de abstra√ß√£o descrito pelo seu nome</strong>.<br></p>
<p>Finalmente, podemos, tamb√©m, estabelecer mais 2 regras que nos ajudam a organizar, de forma clara, o trabalho a ser feito por meio de fun√ß√µes:</p>
<ol>
<li>O n√≠vel de abstra√ß√£o do c√≥digo, dentro de uma fun√ß√£o, deve ser um n√≠vel abaixo do n√≠vel impl√≠cito no nome da fun√ß√£o.<br></li>
<li>Deve-se evitar misturar n√≠veis de abstra√ß√£o dentro de fun√ß√µes. Ou seja, qualquer coisa que n√£o se encaixe no n√≠vel abaixo do nome, deve ser codificado em outro lugar.<br>
<br></li>
</ol>
<p>Vamos mostrar um exemplo em c√≥digo para ajudar na compreens√£o de tudo o que foi dito.<br></p>
<p>Considere a fun√ß√£o <strong>renderElement()</strong>, abaixo.<br></p>
<pre><code>function renderElement(dataToRender) {
    const element = dataToRender.element
    if (element === 'script' || element === 'SCRIPT') {
        throw new Error('Invalid element.')
    }

    let partialOpeningTag = '&lt;' + element

    const attributes = dataToRender.attributes

    for (const attribute of attributes) {
        partialOpeningTag = 
            partialOpeningTag + ' ' +
            attribute.name + '="' +
            attribute.value + '"';
    }

    const openingTag = partialOpeningTag + '&gt;'

    const closingTag = '&lt;!--' + element + '--&gt;'
    const content = dataToRender.content

    const template = openingTag + content + closingTag

    const rootElement = dataToRender.root

    rootElement.innerHTML = template
}
</code></pre>
<p><br></p>
<p>Embora o c√≥digo acima n√£o seja dif√≠cil de ler, veja, abaixo, o que acontece quando refactoramos esse c√≥digo, utilizando os conceitos desta se√ß√£o:<br></p>
<pre><code>function renderElement(dataToRender) {
    const element = dataToRender.element
    validateElementType(element)

    dataToRender.root.innerHTML = 
        buildOpenningTag(
            element, buildAttributesList(dataToRender.attributes) ) + 
        dataToRender.content + 
        buildClosingTag(element)
}

function validateElementType(element) {
    if (element === 'script' || element === 'SCRIPT') {
        throw new Error('Invalid element.')
    }
}

function buildAttributesList(attributes) {
    let attributeList = ''
    for (const attribute of attributes) {
        attributeList = `${attributeList} ${attribute.name}="${attribute.value}"`
    }
    return attributeList;
}

function buildOpenningTag(element, attributes) {
    return( '&lt;' + element + attributes + '&gt;' )
}

function buildClosingTag(element) {
    return( tag = '&lt;!--' + element + '--&gt;' )
}
</code></pre>
<p><br>
Observe como o comportamento da fun√ß√£o <strong>renderElement()</strong>, agora, ficou expl√≠cito, f√°cil de ler e como seu c√≥digo foi refatorado em 4 fun√ß√µes perfeitamente claras e reus√°veis em outras partes do sistema.</p>
<p>Note os n√≠veis de abstra√ß√£o de que falamos anteriormente, no n√≠vel 1, temos o conte√∫do das fun√ß√µes <strong>buildAttributesList()</strong>, <strong>buildOpenningTag()</strong> e <strong>buildClosingTag()</strong>, no n√≠vel 2 temos essas tr√™s fun√ß√µes e no n√≠vel 3, temos a fun√ß√£o <strong>renderElement()</strong>.</p>
<p>Por fim, observe que a atribui√ß√£o direta da propriedade <strong>dataToRender.root.innerHTML</strong> n√£o atende a regra 2, acima, porque essa atribui√ß√£o √© uma a√ß√£o que manipula direto o conte√∫do do DOM e est√° mais para algo do n√≠vel 1 do que do n√≠vel 2.<br>
Nesse caso, entretanto, abrimos uma exce√ß√£o porque, para resolver isso, ter√≠amos de criar uma fun√ß√£o que receberia o elemento <strong>root</strong> e o conte√∫do, como par√¢metros, para, depois, apenas fazer a atribui√ß√£o da propriedade <strong>innerHTML</strong>. Ou seja, neste caso, o atendimento da regra 2 acabaria deixando o c√≥digo polu√≠do e menos claro e, portanto, n√£o vale a pena seguir a regra 2.<br>
<br></p>
<hr />
<h3 id="143-limitar-o-numero-de-argumentos-das-funcoes">1.4.3- Limitar o n√∫mero de argumentos das fun√ß√µes<br></h3>
<ul>
<li>
<p><strong>Quanto menos argumentos, melhor</strong><br>
A partir de 2 argumentos torna-se necess√°rio mapear cada par√¢metro, na chamada da fun√ß√£o, a cada argumento da declara√ß√£o da fun√ß√£o. Isto √© uma informa√ß√£o impl√≠cita que demanda tempo do desenvolvedor. Al√©m disso, o aumento do n√∫mero de par√¢metros aumenta exponencialmente o n√∫mero de casos de teste para se testar uma fun√ß√£o.<br>
<br></p>
</li>
<li>
<p><strong>Usar objetos ou arrays para agrupar m√∫ltiplos par√¢metros em um √∫nico</strong><br>
Caso n√£o seja poss√≠vel manter apenas 1 ou 2 argumentos, deve-se usar, na chamada da fun√ß√£o, um objeto com os mesmos nomes dos argumentos, de modo a tornar expl√≠cito o que significa cada par√¢metro passado, como no exemplo abaixo.</p>
</li>
</ul>
<p><br></p>
<pre><code>// Bad üòï 
function compare(first, second, comparator) {
    if (comparator === 'equal')         return first === second
    if (comparator === 'not equal')     return first !== second
    if (comparator === 'greater')       return first &gt; second
    if (comparator === 'smaller')       return first &lt; second
}

const isSmaller = compare(3, 5, 'smaller')
const isEqual = compare(3, 5, 'equal')


// Good üòÄ
function compare(comparisonData) {
    const { first, second, comparator } = comparisonData
    if (comparator === 'equal')         return first === second
    if (comparator === 'not equal')     return first !== second
    if (comparator === 'greater')       return first &gt; second
    if (comparator === 'smaller')       return first &lt; second
}

const isSmaller = compare({ first: 3, second: 5, comparator: 'smaller' })
</code></pre>
<p><br></p>
<ul>
<li><strong>N√£o usar argumentos como flags</strong><br>
Flags indicam que a fun√ß√£o faz mais de uma coisa e, nesse caso, a fun√ß√£o deveria ser dividida em 2 ou mais fun√ß√µes.</li>
</ul>
<p><br></p>
<pre><code>// Bad üòï 
function createFile(name, temp) {
    if (temp) {
        fs.create(`./temp/${name}`)
    } else {
        fs.create(name)
    }
}


// Good üòÄ
function createFile(name) {  fs.create(name)  }
function createTempFile(name) {  createFile(`./temp/${name}`)  }
</code></pre>
<p><br></p>
<hr />
<h3 id="144-usar-parametros-default">1.4.4- Usar par√¢metros default<br></h3>
<ul>
<li>Usar argumentos default, quando poss√≠vel, reduz o n√∫mero de testes condicionais dentro da fun√ß√£o.<br>
<br></li>
</ul>
<hr />
<h3 id="145-evitar-efeitos-colaterais-das-funcoes">1.4.5- Evitar efeitos colaterais das fun√ß√µes<br></h3>
<p>Uma fun√ß√£o produz um efeito colateral quando ela envia ou escreve informa√ß√µes em qualquer coisa al√©m de receber par√¢metros e retornar valores. Um efeito colateral pode ser, por exemplo, escrever em um arquivo, modificar uma vari√°vel global ou modificar um argumento mut√°vel passado como par√¢metro, como por exemplo um array ou objeto.</p>
<p>Acessar recursos externos √© necess√°rio, como por exemplo acessar um banco de dados. Nestes casos, o que deve ser feito √© centralizar onde isso √© feito em um conjunto de fun√ß√µes, componente ou servi√ßo designados para tal fim. O acesso ao recurso n√£o deve ser feito de qualquer lugar, sem crit√©rio, e deve sempre passar pelos m√©todos ou fun√ß√µes do Componente ou Servi√ßo designado para isso.</p>
<p>No caso de par√¢metros mut√°veis, passados como argumentos para uma fun√ß√£o, caso seja necess√°rio transformar esse conte√∫do passado como par√¢metro, o que deve ser feito √© criar uma c√≥pia profunda do objeto em quest√£o, transformar tal objeto e retornar a c√≥pia modificada como resultado da fun√ß√£o.<br> O resultado de uma fun√ß√£o nunca deve ser 'retornado' no objeto passado como par√¢metro.<br>
<br></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../3-flow-control/" class="btn btn-neutral float-left" title="1.3- Controle do fluxo"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../5-vscode-config/" class="btn btn-neutral float-right" title="1.5- Configura√ß√£o VSCode">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../3-flow-control/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../5-vscode-config/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
